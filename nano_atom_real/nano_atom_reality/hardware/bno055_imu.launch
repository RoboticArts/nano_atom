<?xml version="1.0"?> 
<launch>
    
    <!-- Robot properties -->
    <arg name="robot_id" default="robot"            />
    <arg name="prefix"   default="$(arg robot_id)_" />
    
    <!-- IMU link prefix -->
    <arg name="imu_prefix"  default="$(arg prefix)imu_" />

    <!-- IMU configuration -->
    <arg name="serial_port" default="/dev/ttyUSB0" />
    <arg name="operation_mode" default="IMU"       />
    <arg name="oscillator" default="INTERNAL"      />
    <arg name="reset_orientation" default="true"   />
    <arg name="frequency" default="50"             /> 
    <arg name="use_magnetometer" default="false"   />
    <arg name="use_temperature" default="false"    /> 

    <!-- Enable tf -->
    <arg name="publish_tf"    default="false"                  />
    <arg name="fixed_frame"   default="$(arg prefix)base_link" />


    <!-- IMU driver -->
    <node pkg="ros_imu_bno055" type="imu_ros.py" name="ros_imu_bno055_node" output="screen">
        <param name="serial_port" value="$(arg serial_port)"               />
        <param name="frame_id" value="$(arg imu_prefix)link"               />
        <param name="operation_mode" value="$(arg operation_mode)"         />
        <param name="oscillator" value="$(arg oscillator)"                 />
        <param name="reset_orientation" value = "$(arg reset_orientation)" />
        <param name="frequency" value="$(arg frequency)"                   />
        <param name="use_magnetometer" value="$(arg use_magnetometer)"     />    
        <param name="use_temperature" value="$(arg use_temperature)"       />    
    </node>


    <group if="$(arg publish_tf)">

        <!-- IMU frame -->
        <node pkg="tf2_ros" type="static_transform_publisher" name="$(arg imu_prefix)link"
            args="0.09286 0 0.58275 0 0 0  $(arg fixed_frame) $(arg imu_prefix)link" />    
        
    </group>


</launch>